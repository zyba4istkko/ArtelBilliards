# Технический контекст Artel Billiards

## Технические особенности

1. **Платформа**: Telegram Mini Apps как основная платформа
2. **Режим работы**: Только онлайн, без офлайн-режима
3. **Система событий**:
   - Забитые шары с указанием типа и дополнительной информации
   - Штрафы и фолы
   - Логирование всех действий
4. **Функции для повышения удобства**:
   - Таймер для отслеживания длительности игр
   - Автоматический расчет выигрышей/проигрышей
   - Профили игроков с историей
   - Управление списком друзей

## Технологический стек

### Frontend
- **React 19.1.0** - основная библиотека UI
- **Vite 7.0.4** - сборщик и инструмент разработки
- **React Context API** - управление состоянием
- **Пользовательский CSS** - стилизация
- **Telegram Mini Apps SDK** - интеграция с Telegram

### Backend
- **FastAPI** - веб-фреймворк для Python
- **Python 3.8+** - основной язык бэкенда
- **SQLAlchemy** - ORM для работы с базой данных
- **Pydantic** - валидация данных
- **Uvicorn** - ASGI сервер

### База данных
- **PostgreSQL** - основная база данных
- Поддержка реляционных связей для игроков, сессий, игр
- Оптимизация для быстрого доступа к текущим играм

### Интеграция и авторизация
- **Google Auth** - авторизация через Google
- **Telegram API** - авторизация через Telegram
- **WebSockets** - для реал-тайм обновлений

## Требования к системе

### Зависимости
- Python 3.8+ для FastAPI бэкенда
- Node.js 18+ для React фронтенда
- PostgreSQL для базы данных
- Дополнительные Python пакеты: fastapi, uvicorn, sqlalchemy, pydantic

### Производительность
- Быстрое отображение текущего состояния игры
- Минимальная задержка при добавлении событий
- Эффективная синхронизация между клиентами

### Безопасность
- Защищенные API эндпоинты
- Валидация прав доступа к сессиям
- Безопасное хранение пользовательских данных

## Проблемы и решения

- **Проблема**: Синхронизация игры в реальном времени
  **Решение**: Реализация WebSocket соединений для живых обновлений

- **Проблема**: Сложная логика бильярдной игры
  **Решение**: Создание модульного игрового движка с четким управлением состоянием

- **Проблема**: Кроссплатформенная совместимость
  **Решение**: Использование адаптивного дизайна и функций прогрессивного веб-приложения

- **Проблема**: Управление пустыми пользователями
  **Решение**: Создание временных профилей с ограниченными правами

## Архитектура приложения

### Монолитная структура (рекомендуемая для MVP)
- Единое приложение с четким разделением на слои
- Frontend: React приложение в Telegram Mini Apps
- Backend: FastAPI сервер с REST API
- Database: PostgreSQL с оптимизированной схемой

### Коммуникация
- REST API для основных операций
- WebSockets для реал-тайм обновлений
- JSON формат данных
- Стандартные HTTP коды ответов

### Структура проекта
```
artelBilliards/
├── react-app/          # Frontend React приложение
├── fast-api-app/       # Backend FastAPI приложение  
├── database/           # Скрипты и миграции БД
└── docs/              # Документация проекта
```
