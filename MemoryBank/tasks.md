# Задача: Разработка приложения Artel Billiards

## Описание
Полнофункциональное приложение для бильярда с фронтендом на React и бэкендом на FastAPI для управления бильярдными играми, игроками и сессиями.

## Сложность
Уровень: 3
Тип: Промежуточная функциональность

## Технологический стек
- Frontend: React 19.1.0 + Vite 7.0.4
- Backend: FastAPI + Python + RabbitMQ + fastStream
- База данных: PostgreSQL + Alembic (миграции)
- Управление состоянием: React Context API
- UI Framework: Пользовательский CSS + потенциально компонентная библиотека
- Платформа: Telegram Mini Apps
- Аутентификация: JWT tokens
- Тестирование: pytest
- Логирование: Python logging / Loguru
- Мониторинг: Prometheus
- Контейнеризация: Docker + Docker Compose

## Контрольные точки валидации технологий
- [ ] Frontend React приложение успешно собирается
- [ ] Backend FastAPI сервер инициализируется
- [ ] Соединение с базой данных установлено
- [ ] Alembic миграции работают корректно
- [ ] RabbitMQ подключение и очереди функционируют
- [ ] fastStream обработчики сообщений работают
- [ ] JWT аутентификация настроена и функционирует
- [ ] pytest тесты запускаются и проходят
- [ ] Логирование настроено и работает
- [ ] Prometheus метрики собираются
- [ ] Docker контейнеры собираются и запускаются
- [ ] API эндпоинты отвечают корректно
- [ ] Коммуникация frontend-backend работает

## Статус
- [x] Инициализация завершена
- [x] Планирование завершено
- [x] Архитектура спроектирована
- [x] Детализация требований обновлена
- [ ] Проектирование базы данных
- [ ] Проектирование API
- [ ] Проектирование UI/UX
- [ ] Валидация технологий завершена
- [ ] Разработка бэкенда
- [ ] Разработка фронтенда
- [ ] Интеграционное тестирование

## План реализации
1. Настройка инфраструктуры и технологий
   - Настройка Docker контейнеров для всех сервисов
   - Конфигурация PostgreSQL и RabbitMQ в Docker
   - Настройка Alembic для миграций БД
   - Инициализация pytest для тестирования
   - Настройка системы логирования (Loguru)
   - Конфигурация Prometheus для мониторинга
2. Разработка бэкенда
   - Настройка структуры проекта FastAPI
   - Реализация JWT аутентификации
   - Создание моделей базы данных (Пользователи, Друзья, Игры, Сессии, События, Шаблоны)
   - Настройка fastStream для работы с RabbitMQ
   - Реализация системы "пустых пользователей"
   - Реализация CRUD API эндпоинтов для всех типов игр
   - Добавление системы аутентификации (Google Auth + Telegram)
   - Реализация WebSocket для реал-тайм обновлений
   - Добавление метрик Prometheus в API
   - Написание unit и integration тестов
3. Разработка фронтенда
   - Проектирование UI/UX для бильярдного приложения
   - Создание компонентов авторизации и профиля
   - Создание системы управления друзьями
   - Создание компонентов создания и настройки сессий
   - Создание игрового интерфейса для всех типов игр
   - Создание системы статистики и истории
   - Реализация управления состоянием с Context API
   - Интеграция с Telegram Mini Apps SDK
4. Интеграция и тестирование
   - Соединение фронтенда с бэкендом
   - Интеграция JWT аутентификации с фронтендом
   - Реализация функций реального времени через WebSockets
   - Тестирование асинхронных задач RabbitMQ
   - Тестирование всех типов игр
   - Тестирование системы очередности
   - E2E тестирование с полным стеком
   - Валидация метрик Prometheus
   - Тестирование в Docker контейнерах
   - Добавление комплексного тестирования

## Требуемые креативные фазы
- [x] **Проектирование архитектуры приложения** → РЕШЕНИЕ: Микросервисная архитектура (6 сервисов) - см. `creative-architecture.md`
- [x] **Интеграция новых технологий в стек приложения** → РЕШЕНИЕ: Гибридная архитектура - см. `creative-tech-integration.md`
- [ ] Проектирование инфраструктуры Docker и DevOps
- [ ] Проектирование JWT аутентификации и безопасности
- [ ] Проектирование асинхронной архитектуры с RabbitMQ
- [ ] Проектирование системы мониторинга и логирования
- [ ] Проектирование тестовой стратегии (pytest)
- [x] **Проектирование базы данных для полной функциональности** → РЕШЕНИЕ: Database-per-service (5 БД) - см. `creative-database.md`
- [ ] Проектирование API с учетом всех типов игр
- [ ] Проектирование UI/UX для интерфейса бильярда
- [ ] Проектирование компонентной архитектуры React
- [ ] Проектирование системы управления друзьями
- [x] **Проектирование системы шаблонов игр** → РЕШЕНИЕ: Гибридная система валидации с Pydantic моделями + алгоритмы очередности игроков - см. `creative-templates.md`

## Зависимости
- Python 3.8+ для FastAPI бэкенда
- Node.js 18+ для React фронтенда
- Docker & Docker Compose для контейнеризации
- PostgreSQL для базы данных
- RabbitMQ для асинхронных задач
- Основные Python пакеты:
  - fastapi, uvicorn, sqlalchemy, alembic, pydantic
  - faststream, pika (для RabbitMQ)
  - pytest, pytest-asyncio, pytest-cov
  - prometheus-client, loguru
  - python-jose[cryptography] (для JWT)
  - passlib[bcrypt] (для хеширования паролей)

## Проблемы и решения
- Проблема: Синхронизация игры в реальном времени
  Решение: Реализация WebSocket соединений для живых обновлений
- Проблема: Сложная логика бильярдной игры
  Решение: Создание модульного игрового движка с четким управлением состоянием
- Проблема: Кроссплатформенная совместимость
  Решение: Использование адаптивного дизайна и функций прогрессивного веб-приложения

## Язык документации
Основной язык: Русский
Все комментарии, документация и общение на русском языке
