<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–®–∞–±–ª–æ–Ω—ã –∏–≥—Ä - Artel Billiards</title>
    
    <style>
        /* Design Tokens */
        :root {
            /* Colors */
            --color-primary: #41B3A3;
            --color-mint: #85DCCB;
            --color-coral: #E27D60;
            --color-peach: #E8A87C;
            --color-rose-purple: #C38D9E;
            
            --color-black: #0a0a0a;
            --color-gray-900: #121212;
            --color-gray-800: #1a1a1a;
            --color-gray-700: #2a2a2a;
            --color-gray-600: #333333;
            --color-gray-500: #4a4a4a;
            --color-gray-300: #b0b0b0;
            --color-white: #ffffff;
            
            --color-success: #22c55e;
            --color-warning: #f59e0b;
            --color-error: #ef4444;
            
            /* Typography */
            --font-family: 'Inter', system-ui, -apple-system, sans-serif;
            
            /* Spacing */
            --spacing-xs: 4px;
            --spacing-sm: 8px;
            --spacing-md: 12px;
            --spacing-lg: 16px;
            --spacing-xl: 24px;
            --spacing-2xl: 32px;
            --spacing-3xl: 48px;
            
            /* Radii */
            --radius-sm: 10px;
            --radius-md: 14px;
            --radius-lg: 18px;
            --radius-xl: 24px;
            --radius-pill: 999px;
            
            /* Shadows */
            --shadow-sm: 0 1px 2px rgba(0,0,0,0.08);
            --shadow-md: 0 6px 16px rgba(0,0,0,0.16);
            --shadow-lg: 0 12px 28px rgba(0,0,0,0.22);
            --shadow-glow-mint: 0 10px 20px rgba(133, 220, 203, 0.25);
            --shadow-glow-coral: 0 10px 20px rgba(226, 125, 96, 0.25);
            
            /* Transitions */
            --transition-fast: 150ms ease-in-out;
            --transition-normal: 250ms ease-in-out;
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--color-gray-700);
            border-radius: var(--radius-sm);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--color-gray-500);
            border-radius: var(--radius-sm);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--color-gray-600);
        }

        * {
            scrollbar-width: thin;
            scrollbar-color: var(--color-gray-500) var(--color-gray-700);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: var(--font-family);
            background: var(--color-black);
            color: var(--color-white);
            line-height: 1.5;
            min-height: 100vh;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: var(--spacing-lg);
        }
        
        /* Header */
        .header {
            text-align: center;
            margin-bottom: var(--spacing-3xl);
        }
        
        .page-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: var(--spacing-lg);
            background: linear-gradient(135deg, var(--color-mint), var(--color-coral));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .page-subtitle {
            font-size: 1.125rem;
            color: var(--color-gray-300);
            margin-bottom: var(--spacing-lg);
        }
        
        /* Templates Grid */
        .templates-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--spacing-xl);
            margin-bottom: var(--spacing-3xl);
        }
        
        .template-card {
            background: var(--color-gray-800);
            border: 1px solid var(--color-gray-600);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            transition: all var(--transition-normal);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        .template-card:hover {
            border-color: var(--color-mint);
            box-shadow: var(--shadow-glow-mint);
            transform: translateY(-4px);
        }
        
        .template-card.create-custom {
            border: 2px dashed var(--color-gray-600);
            background: var(--color-gray-900);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            min-height: 320px;
        }
        
        .template-card.create-custom:hover {
            border-color: var(--color-coral);
            background: var(--color-gray-800);
            box-shadow: var(--shadow-glow-coral);
        }
        
        .template-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--color-mint), var(--color-primary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            margin-bottom: var(--spacing-lg);
        }
        
        .template-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: var(--spacing-md);
            color: var(--color-white);
        }
        
        .template-description {
            color: var(--color-gray-300);
            margin-bottom: var(--spacing-xl);
            line-height: 1.6;
        }
        
        .template-settings {
            margin-bottom: var(--spacing-xl);
        }
        
        .setting-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--spacing-sm) 0;
            border-bottom: 1px solid var(--color-gray-700);
        }
        
        .setting-row:last-child {
            border-bottom: none;
        }
        
        .setting-label {
            font-size: 0.875rem;
            color: var(--color-gray-300);
        }
        
        .setting-value {
            font-weight: 600;
            color: var(--color-mint);
            font-size: 0.875rem;
        }
        
        .template-button {
            background: linear-gradient(135deg, var(--color-mint), var(--color-primary));
            color: var(--color-black);
            border: none;
            padding: var(--spacing-md) var(--spacing-xl);
            border-radius: var(--radius-md);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-fast);
            width: 100%;
            position: relative;
            overflow: hidden;
        }
        
        .template-button:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .template-button:active {
            transform: translateY(0);
        }
        
        /* Create Custom Template */
        .create-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--color-coral), var(--color-peach));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            margin-bottom: var(--spacing-xl);
            transition: all var(--transition-normal);
        }
        
        .template-card.create-custom:hover .create-icon {
            transform: scale(1.1) rotate(90deg);
        }
        
        .create-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: var(--spacing-md);
            color: var(--color-white);
        }
        
        .create-description {
            color: var(--color-gray-300);
            margin-bottom: var(--spacing-xl);
        }
        
        .create-button {
            background: linear-gradient(135deg, var(--color-coral), var(--color-peach));
            color: var(--color-white);
            border: none;
            padding: var(--spacing-md) var(--spacing-2xl);
            border-radius: var(--radius-md);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-fast);
        }
        
        .create-button:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        /* Badge */
        .template-badge {
            position: absolute;
            top: var(--spacing-lg);
            right: var(--spacing-lg);
            background: var(--color-success);
            color: var(--color-white);
            padding: var(--spacing-xs) var(--spacing-md);
            border-radius: var(--radius-pill);
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: var(--spacing-lg);
        }
        
        .modal-overlay.show {
            display: flex;
        }
        
        .modal-content {
            background: var(--color-gray-800);
            border-radius: var(--radius-lg);
            padding: var(--spacing-2xl);
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            border: 1px solid var(--color-gray-600);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-xl);
            padding-bottom: var(--spacing-lg);
            border-bottom: 1px solid var(--color-gray-700);
        }
        
        .modal-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--color-white);
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }
        
        .modal-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--color-mint), var(--color-primary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }
        
        .close-button {
            background: none;
            border: none;
            color: var(--color-gray-300);
            font-size: 1.5rem;
            cursor: pointer;
            padding: var(--spacing-sm);
            border-radius: var(--radius-sm);
            transition: all var(--transition-fast);
        }
        
        .close-button:hover {
            background: var(--color-gray-700);
            color: var(--color-white);
        }
        
        /* Settings Grid –≤ –º–æ–¥–∞–ª–µ */
        .modal-settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
        }
        
        .modal-setting-item {
            background: var(--color-gray-700);
            border-radius: var(--radius-md);
            padding: var(--spacing-lg);
        }
        
        .modal-setting-title {
            font-weight: 600;
            margin-bottom: var(--spacing-md);
            color: var(--color-white);
            font-size: 0.875rem;
        }
        
        .modal-setting-value {
            color: var(--color-mint);
            font-weight: 600;
            padding: var(--spacing-sm) var(--spacing-md);
            background: var(--color-gray-600);
            border-radius: var(--radius-pill);
            display: inline-block;
            font-size: 0.875rem;
        }
        
        /* Balls Section –≤ –º–æ–¥–∞–ª–µ */
        .modal-balls-section {
            margin-bottom: var(--spacing-xl);
        }
        
        .modal-section-title {
            color: var(--color-mint);
            font-weight: 700;
            margin-bottom: var(--spacing-lg);
            font-size: 1.125rem;
        }
        
        .modal-balls-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-xl);
        }
        
        .modal-ball-item {
            background: var(--color-gray-700);
            border-radius: var(--radius-md);
            padding: var(--spacing-md);
            text-align: center;
            transition: all var(--transition-fast);
        }
        
        .modal-ball-item:hover {
            background: var(--color-gray-600);
            transform: translateY(-2px);
        }
        
        .modal-ball {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            margin: 0 auto var(--spacing-sm);
            box-shadow: inset -2px -2px 6px rgba(0,0,0,0.3), inset 2px 2px 6px rgba(255,255,255,0.1);
            position: relative;
        }
        
        .modal-ball::after {
            content: '';
            position: absolute;
            top: 6px;
            left: 10px;
            width: 8px;
            height: 8px;
            background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.8), transparent 60%);
            border-radius: 50%;
        }
        
        .modal-ball.white { background: #ffffff; border: 1px solid var(--color-gray-600); }
        .modal-ball.yellow { background: #ffeb3b; }
        .modal-ball.green { background: #4caf50; }
        .modal-ball.brown { background: #8d6e63; }
        .modal-ball.blue { background: #2196f3; }
        .modal-ball.pink { background: #e91e63; }
        .modal-ball.black { background: #212121; }
        .modal-ball.red { background: #f44336; }
        
        .modal-ball-name {
            font-weight: 600;
            color: var(--color-white);
            margin-bottom: var(--spacing-xs);
            font-size: 0.75rem;
        }
        
        .modal-ball-points {
            font-size: 0.7rem;
            color: var(--color-gray-300);
        }
        
        /* Scoring Section –≤ –º–æ–¥–∞–ª–µ */
        .modal-scoring-section {
            margin-bottom: var(--spacing-xl);
        }
        
        .modal-scoring-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--spacing-lg);
        }
        
        .modal-scoring-item {
            background: var(--color-gray-700);
            border-radius: var(--radius-md);
            padding: var(--spacing-lg);
        }
        
        .modal-scoring-label {
            font-size: 0.875rem;
            color: var(--color-gray-300);
            margin-bottom: var(--spacing-sm);
        }
        
        .modal-scoring-value {
            color: var(--color-mint);
            font-weight: 600;
            font-size: 1.125rem;
        }
        
        .modal-action-buttons {
            display: flex;
            gap: var(--spacing-md);
            justify-content: flex-end;
        }
        
        .modal-button {
            padding: var(--spacing-md) var(--spacing-xl);
            border-radius: var(--radius-md);
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-fast);
            border: none;
        }
        
        .modal-button.secondary {
            background: var(--color-gray-600);
            color: var(--color-white);
        }
        
        .modal-button.secondary:hover {
            background: var(--color-gray-500);
        }
        
        .modal-button.primary {
            background: linear-gradient(135deg, var(--color-mint), var(--color-primary));
            color: var(--color-black);
        }
        
        .modal-button.primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        /* Create Template Form */
        .create-form-section {
            margin-bottom: var(--spacing-xl);
        }
        
        .form-section-title {
            color: var(--color-mint);
            font-weight: 700;
            margin-bottom: var(--spacing-lg);
            font-size: 1.125rem;
        }
        
        .form-group {
            margin-bottom: var(--spacing-lg);
        }
        
        .form-label {
            display: block;
            font-size: 0.875rem;
            color: var(--color-gray-300);
            margin-bottom: var(--spacing-sm);
            font-weight: 600;
        }
        
        .form-input {
            width: 100%;
            background: var(--color-gray-700);
            border: 1px solid var(--color-gray-600);
            border-radius: var(--radius-md);
            padding: var(--spacing-md);
            color: var(--color-white);
            font-family: var(--font-family);
            font-size: 0.875rem;
            transition: all var(--transition-fast);
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--color-mint);
            box-shadow: 0 0 0 2px rgba(133, 220, 203, 0.2);
        }
        
        .form-input::placeholder {
            color: var(--color-gray-300);
        }
        
        .form-textarea {
            resize: vertical;
            min-height: 80px;
        }
        
        .form-options {
            display: flex;
            gap: var(--spacing-sm);
            flex-wrap: wrap;
        }
        
        .form-option {
            background: var(--color-gray-600);
            border: 1px solid var(--color-gray-500);
            border-radius: var(--radius-pill);
            padding: var(--spacing-sm) var(--spacing-lg);
            cursor: pointer;
            transition: all var(--transition-fast);
            font-size: 0.875rem;
            color: var(--color-white);
        }
        
        .form-option:hover {
            border-color: var(--color-mint);
        }
        
        .form-option.selected {
            background: var(--color-mint);
            color: var(--color-black);
            border-color: var(--color-mint);
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--spacing-lg);
        }
        
        .form-grid-item {
            background: var(--color-gray-700);
            border-radius: var(--radius-md);
            padding: var(--spacing-lg);
        }
        
        .form-grid-title {
            font-weight: 600;
            margin-bottom: var(--spacing-md);
            color: var(--color-white);
            font-size: 0.875rem;
        }
        
        .price-input-group {
            display: flex;
            gap: var(--spacing-sm);
            align-items: center;
            flex-wrap: wrap;
        }
        
        .price-option {
            background: var(--color-gray-600);
            border: 1px solid var(--color-gray-500);
            border-radius: var(--radius-pill);
            padding: var(--spacing-sm) var(--spacing-md);
            cursor: pointer;
            transition: all var(--transition-fast);
            font-size: 0.875rem;
            color: var(--color-white);
            min-width: 50px;
            text-align: center;
        }
        
        .price-option:hover {
            border-color: var(--color-mint);
        }
        
        .price-option.selected {
            background: var(--color-mint);
            color: var(--color-black);
            border-color: var(--color-mint);
        }
        
        .price-input {
            background: var(--color-gray-600);
            border: 1px solid var(--color-gray-500);
            border-radius: var(--radius-pill);
            padding: var(--spacing-sm) var(--spacing-md);
            color: var(--color-white);
            font-family: var(--font-family);
            width: 80px;
            text-align: center;
            font-size: 0.875rem;
        }
        
        .price-input:focus {
            outline: none;
            border-color: var(--color-mint);
        }
        
        .balls-config-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: var(--spacing-md);
        }
        
        .ball-config-item {
            background: var(--color-gray-600);
            border-radius: var(--radius-md);
            padding: var(--spacing-md);
            text-align: center;
            transition: all var(--transition-fast);
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .ball-config-item:hover {
            background: var(--color-gray-500);
            transform: translateY(-2px);
        }
        
        .ball-config-item.selected {
            border-color: var(--color-mint);
            background: var(--color-gray-500);
        }
        
        .config-ball {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            margin: 0 auto var(--spacing-sm);
            box-shadow: inset -2px -2px 6px rgba(0,0,0,0.3), inset 2px 2px 6px rgba(255,255,255,0.1);
            position: relative;
        }
        
        .config-ball::after {
            content: '';
            position: absolute;
            top: 6px;
            left: 10px;
            width: 8px;
            height: 8px;
            background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.8), transparent 60%);
            border-radius: 50%;
        }
        
        .config-ball.white { background: #ffffff; border: 1px solid var(--color-gray-600); }
        .config-ball.yellow { background: #ffeb3b; }
        .config-ball.green { background: #4caf50; }
        .config-ball.brown { background: #8d6e63; }
        .config-ball.blue { background: #2196f3; }
        .config-ball.pink { background: #e91e63; }
        .config-ball.black { background: #212121; }
        .config-ball.red { background: #f44336; }
        
        .config-ball-name {
            font-weight: 600;
            color: var(--color-white);
            margin-bottom: var(--spacing-xs);
            font-size: 0.75rem;
        }
        
        .config-ball-input {
            background: var(--color-gray-700);
            border: 1px solid var(--color-gray-600);
            border-radius: var(--radius-sm);
            padding: var(--spacing-xs) var(--spacing-sm);
            color: var(--color-white);
            font-size: 0.7rem;
            width: 100%;
            text-align: center;
        }
        
        .config-ball-input:focus {
            outline: none;
            border-color: var(--color-mint);
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            .container {
                padding: var(--spacing-md);
            }
            
            .page-title {
                font-size: 2rem;
            }
            
            .templates-grid {
                grid-template-columns: 1fr;
                gap: var(--spacing-lg);
            }
            
            .template-card {
                padding: var(--spacing-lg);
            }
            
            .template-card.create-custom {
                min-height: 280px;
            }
            
            .modal-content {
                margin: var(--spacing-md);
                padding: var(--spacing-lg);
                max-height: 85vh;
            }
            
            .modal-settings-grid {
                grid-template-columns: 1fr;
            }
            
            .modal-balls-grid {
                grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            }
            
            .modal-scoring-grid {
                grid-template-columns: 1fr;
            }
            
            .modal-action-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <main class="container">
        <!-- Header -->
        <div class="header">
            <h1 class="page-title">–®–∞–±–ª–æ–Ω—ã –∏–≥—Ä</h1>
            <p class="page-subtitle">–í—ã–±–µ—Ä–∏ –≥–æ—Ç–æ–≤—ã–π —à–∞–±–ª–æ–Ω –∏–ª–∏ —Å–æ–∑–¥–∞–π —Å–≤–æ–∏ –ø—Ä–∞–≤–∏–ª–∞</p>
        </div>

        <!-- Templates Grid -->
        <div class="templates-grid">
            <!-- Template 1: –ö–æ–ª—Ö–æ–∑ -->
            <div class="template-card" onclick="viewTemplate('kolkhoz')">
                <div class="template-badge">–ü–æ–ø—É–ª—è—Ä–Ω—ã–π</div>
                <div class="template-icon">üé±</div>
                <h3 class="template-title">–ö–æ–ª—Ö–æ–∑</h3>
                <p class="template-description">
                    –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è —Ä—É—Å—Å–∫–∞—è –∏–≥—Ä–∞. –ü—Ä–æ—Å—Ç—ã–µ –ø—Ä–∞–≤–∏–ª–∞, –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö –∏ –¥—Ä—É–∂–µ—Å–∫–∏—Ö –ø–∞—Ä—Ç–∏–π.
                </p>
                
                <div class="template-settings">
                    <div class="setting-row">
                        <span class="setting-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞—Ä–æ–≤:</span>
                        <span class="setting-value">15 —à–∞—Ä–æ–≤</span>
                    </div>
                    <div class="setting-row">
                        <span class="setting-label">–£—Å–ª–æ–≤–∏–µ –ø–æ–±–µ–¥—ã:</span>
                        <span class="setting-value">–î–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ</span>
                    </div>
                    <div class="setting-row">
                        <span class="setting-label">–°—Ç–æ–∏–º–æ—Å—Ç—å –æ—á–∫–∞:</span>
                        <span class="setting-value">10‚ÇΩ</span>
                    </div>
                    <div class="setting-row">
                        <span class="setting-label">–®—Ç—Ä–∞—Ñ –∑–∞ —Ñ–æ–ª:</span>
                        <span class="setting-value">50‚ÇΩ</span>
                    </div>
                </div>
                
                <button class="template-button" onclick="event.stopPropagation(); viewTemplate('kolkhoz')">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —à–∞–±–ª–æ–Ω</button>
            </div>

            <!-- Template 2: –ê–º–µ—Ä–∏–∫–∞–Ω–∫–∞ -->
            <div class="template-card" onclick="viewTemplate('americana')">
                <div class="template-icon">üî¥</div>
                <h3 class="template-title">–ê–º–µ—Ä–∏–∫–∞–Ω–∫–∞</h3>
                <p class="template-description">
                    –ü–æ–ø—É–ª—è—Ä–Ω–∞—è –∏–≥—Ä–∞ –≤ –ø—É–ª. –ò–≥—Ä–∞–π—Ç–µ —Å–ø–ª–æ—à–Ω—ã–º–∏ –∏–ª–∏ –ø–æ–ª–æ—Å–∞—Ç—ã–º–∏ —à–∞—Ä–∞–º–∏, –∑–∞–±–µ–π—Ç–µ –≤–æ—Å—å–º–µ—Ä–∫—É –¥–ª—è –ø–æ–±–µ–¥—ã.
                </p>
                
                <div class="template-settings">
                    <div class="setting-row">
                        <span class="setting-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞—Ä–æ–≤:</span>
                        <span class="setting-value">15 —à–∞—Ä–æ–≤</span>
                    </div>
                    <div class="setting-row">
                        <span class="setting-label">–£—Å–ª–æ–≤–∏–µ –ø–æ–±–µ–¥—ã:</span>
                        <span class="setting-value">–ó–∞–±–∏—Ç—å 8-–∫—É</span>
                    </div>
                    <div class="setting-row">
                        <span class="setting-label">–°—Ç–æ–∏–º–æ—Å—Ç—å –æ—á–∫–∞:</span>
                        <span class="setting-value">25‚ÇΩ</span>
                    </div>
                    <div class="setting-row">
                        <span class="setting-label">–®—Ç—Ä–∞—Ñ –∑–∞ —Ñ–æ–ª:</span>
                        <span class="setting-value">100‚ÇΩ</span>
                    </div>
                </div>
                
                <button class="template-button" onclick="event.stopPropagation(); viewTemplate('americana')">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —à–∞–±–ª–æ–Ω</button>
            </div>

            <!-- Template 3: –ü–∏—Ä–∞–º–∏–¥–∞ -->
            <div class="template-card" onclick="viewTemplate('pyramid')">
                <div class="template-icon">üî∫</div>
                <h3 class="template-title">–ü–∏—Ä–∞–º–∏–¥–∞</h3>
                <p class="template-description">
                    –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è —Ä—É—Å—Å–∫–∞—è –ø–∏—Ä–∞–º–∏–¥–∞. –¢—Ä–µ–±—É–µ—Ç —Ç–æ—á–Ω–æ—Å—Ç–∏ –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–≥–æ –º—ã—à–ª–µ–Ω–∏—è.
                </p>
                
                <div class="template-settings">
                    <div class="setting-row">
                        <span class="setting-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞—Ä–æ–≤:</span>
                        <span class="setting-value">15 —à–∞—Ä–æ–≤</span>
                    </div>
                    <div class="setting-row">
                        <span class="setting-label">–£—Å–ª–æ–≤–∏–µ –ø–æ–±–µ–¥—ã:</span>
                        <span class="setting-value">–î–æ 71 –æ—á–∫–∞</span>
                    </div>
                    <div class="setting-row">
                        <span class="setting-label">–°—Ç–æ–∏–º–æ—Å—Ç—å –æ—á–∫–∞:</span>
                        <span class="setting-value">50‚ÇΩ</span>
                    </div>
                    <div class="setting-row">
                        <span class="setting-label">–®—Ç—Ä–∞—Ñ –∑–∞ —Ñ–æ–ª:</span>
                        <span class="setting-value">200‚ÇΩ</span>
                    </div>
                </div>
                
                <button class="template-button" onclick="event.stopPropagation(); viewTemplate('pyramid')">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —à–∞–±–ª–æ–Ω</button>
            </div>

            <!-- Create Custom Template -->
            <div class="template-card create-custom" onclick="createCustomTemplate()">
                <div class="create-icon">‚öôÔ∏è</div>
                <h3 class="create-title">–°–æ–∑–¥–∞—Ç—å —Å–≤–æ–π</h3>
                <p class="create-description">
                    –ù–∞—Å—Ç—Ä–æ–π –ø—Ä–∞–≤–∏–ª–∞ –ø–æ–¥ —Å–µ–±—è: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞—Ä–æ–≤, –æ—á–∫–∏, —Å—Ç–æ–∏–º–æ—Å—Ç—å, —à—Ç—Ä–∞—Ñ—ã –∏ –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
                </p>
                <button class="create-button">–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞</button>
            </div>
        </div>
    </main>

    <!-- Modal for Creating Custom Template -->
    <div class="modal-overlay" id="createTemplateModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">
                    <div class="modal-icon">‚öôÔ∏è</div>
                    <span>–°–æ–∑–¥–∞—Ç—å —Å–≤–æ–π —à–∞–±–ª–æ–Ω</span>
                </div>
                <button class="close-button" onclick="closeCreateModal()">&times;</button>
            </div>
            
            <!-- Template Basic Info -->
            <div class="create-form-section">
                <h3 class="form-section-title">–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                
                <div class="form-group">
                    <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞</label>
                    <input type="text" class="form-input" id="templateName" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞..." />
                </div>
                
                <div class="form-group">
                    <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <textarea class="form-input form-textarea" id="templateDescription" placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª –∏–≥—Ä—ã..."></textarea>
                </div>
            </div>
            
            <!-- Game Settings -->
            <div class="create-form-section">
                <h3 class="form-section-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã</h3>
                
                <div class="form-grid">
                    <div class="form-grid-item">
                        <div class="form-grid-title">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞—Ä–æ–≤</div>
                        <div class="form-options" id="ballCountOptions">
                            <div class="form-option selected" data-value="15">15</div>
                            <div class="form-option" data-value="8">8</div>
                            <div class="form-option" data-value="9">9</div>
                            <div class="form-option" data-value="21">21</div>
                        </div>
                    </div>
                    
                    <div class="form-grid-item">
                        <div class="form-grid-title">–õ–∏–º–∏—Ç –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —Ö–æ–¥</div>
                        <div class="form-options" id="timeLimitOptions">
                            <div class="form-option selected" data-value="none">–ë–µ–∑ –ª–∏–º–∏—Ç–∞</div>
                            <div class="form-option" data-value="5">5 –º–∏–Ω</div>
                            <div class="form-option" data-value="10">10 –º–∏–Ω</div>
                            <div class="form-option" data-value="15">15 –º–∏–Ω</div>
                        </div>
                    </div>
                    
                    <div class="form-grid-item">
                        <div class="form-grid-title">–£—Å–ª–æ–≤–∏–µ –ø–æ–±–µ–¥—ã</div>
                        <div class="form-options" id="winConditionOptions">
                            <div class="form-option selected" data-value="last">–î–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ</div>
                            <div class="form-option" data-value="50">–î–æ 50 –æ—á–∫–æ–≤</div>
                            <div class="form-option" data-value="100">–î–æ 100 –æ—á–∫–æ–≤</div>
                            <div class="form-option" data-value="custom">–î—Ä—É–≥–æ–µ</div>
                        </div>
                    </div>
                    
                    <div class="form-grid-item">
                        <div class="form-grid-title">–ü–æ—Ä—è–¥–æ–∫ –∏–≥—Ä—ã</div>
                        <div class="form-options" id="turnOrderOptions">
                            <div class="form-option selected" data-value="sequential">–ü–æ –æ—á–µ—Ä–µ–¥–∏</div>
                            <div class="form-option" data-value="random">–°–ª—É—á–∞–π–Ω—ã–π</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Ball Configuration -->
            <div class="create-form-section">
                <h3 class="form-section-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —à–∞—Ä–æ–≤</h3>
                
                <div class="balls-config-grid" id="ballsConfig">
                    <div class="ball-config-item selected" data-ball="white">
                        <div class="config-ball white"></div>
                        <div class="config-ball-name">–ë–µ–ª—ã–π</div>
                        <input type="text" class="config-ball-input" value="–ë–∏—Ç–æ–∫" placeholder="–û—á–∫–∏...">
                    </div>
                    
                    <div class="ball-config-item selected" data-ball="yellow">
                        <div class="config-ball yellow"></div>
                        <div class="config-ball-name">–ñ–µ–ª—Ç—ã–π</div>
                        <input type="text" class="config-ball-input" value="2" placeholder="–û—á–∫–∏...">
                    </div>
                    
                    <div class="ball-config-item selected" data-ball="green">
                        <div class="config-ball green"></div>
                        <div class="config-ball-name">–ó–µ–ª–µ–Ω—ã–π</div>
                        <input type="text" class="config-ball-input" value="3" placeholder="–û—á–∫–∏...">
                    </div>
                    
                    <div class="ball-config-item selected" data-ball="brown">
                        <div class="config-ball brown"></div>
                        <div class="config-ball-name">–ö–æ—Ä–∏—á–Ω–µ–≤—ã–π</div>
                        <input type="text" class="config-ball-input" value="4" placeholder="–û—á–∫–∏...">
                    </div>
                    
                    <div class="ball-config-item selected" data-ball="blue">
                        <div class="config-ball blue"></div>
                        <div class="config-ball-name">–°–∏–Ω–∏–π</div>
                        <input type="text" class="config-ball-input" value="5" placeholder="–û—á–∫–∏...">
                    </div>
                    
                    <div class="ball-config-item selected" data-ball="pink">
                        <div class="config-ball pink"></div>
                        <div class="config-ball-name">–†–æ–∑–æ–≤—ã–π</div>
                        <input type="text" class="config-ball-input" value="6" placeholder="–û—á–∫–∏...">
                    </div>
                    
                    <div class="ball-config-item selected" data-ball="black">
                        <div class="config-ball black"></div>
                        <div class="config-ball-name">–ß–µ—Ä–Ω—ã–π</div>
                        <input type="text" class="config-ball-input" value="7" placeholder="–û—á–∫–∏...">
                    </div>
                    
                    <div class="ball-config-item" data-ball="red">
                        <div class="config-ball red"></div>
                        <div class="config-ball-name">–ö—Ä–∞—Å–Ω—ã–µ</div>
                        <input type="text" class="config-ball-input" value="1" placeholder="–û—á–∫–∏...">
                    </div>
                </div>
                
                <p style="color: var(--color-gray-300); font-size: 0.8rem; margin-top: var(--spacing-md);">
                    üí° –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —à–∞—Ä —á—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å/–∏—Å–∫–ª—é—á–∏—Ç—å –µ–≥–æ –∏–∑ –∏–≥—Ä—ã
                </p>
            </div>
            
            <!-- Scoring System -->
            <div class="create-form-section">
                <h3 class="form-section-title">–°–∏—Å—Ç–µ–º–∞ –æ—á–∫–æ–≤</h3>
                
                <div class="form-grid">
                    <div class="form-grid-item">
                        <div class="form-grid-title">–°—Ç–æ–∏–º–æ—Å—Ç—å –æ–¥–Ω–æ–≥–æ –æ—á–∫–∞ (‚ÇΩ)</div>
                        <div class="price-input-group" id="pointPriceOptions">
                            <div class="price-option selected" data-value="10">10</div>
                            <div class="price-option" data-value="25">25</div>
                            <div class="price-option" data-value="50">50</div>
                            <div class="price-option" data-value="100">100</div>
                            <input type="number" class="price-input" id="customPointPrice" placeholder="–°–≤–æ–π" min="1" max="1000">
                        </div>
                    </div>
                    
                    <div class="form-grid-item">
                        <div class="form-grid-title">–®—Ç—Ä–∞—Ñ –∑–∞ —Ñ–æ–ª (‚ÇΩ)</div>
                        <div class="price-input-group" id="foulPenaltyOptions">
                            <div class="price-option selected" data-value="50">50</div>
                            <div class="price-option" data-value="100">100</div>
                            <div class="price-option" data-value="200">200</div>
                            <input type="number" class="price-input" id="customFoulPenalty" placeholder="–°–≤–æ–π" min="1" max="5000">
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="modal-action-buttons">
                <button class="modal-button secondary" onclick="closeCreateModal()">–û—Ç–º–µ–Ω–∞</button>
                <button class="modal-button primary" onclick="saveCustomTemplate()">–°–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω</button>
            </div>
        </div>
    </div>

    <!-- Modal for Template Details -->
    <div class="modal-overlay" id="templateModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">
                    <div class="modal-icon" id="modalIcon">üé±</div>
                    <span id="modalTitle">–ö–æ–ª—Ö–æ–∑</span>
                </div>
                <button class="close-button" onclick="closeModal()">&times;</button>
            </div>
            
            <div class="modal-settings-grid" id="modalSettings">
                <!-- Settings will be populated by JavaScript -->
            </div>
            
            <div class="modal-balls-section" id="modalBalls">
                <h3 class="modal-section-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —à–∞—Ä–æ–≤</h3>
                <div class="modal-balls-grid" id="modalBallsGrid">
                    <!-- Balls will be populated by JavaScript -->
                </div>
            </div>
            
            <div class="modal-scoring-section" id="modalScoring">
                <h3 class="modal-section-title">–°–∏—Å—Ç–µ–º–∞ –æ—á–∫–æ–≤</h3>
                <div class="modal-scoring-grid" id="modalScoringGrid">
                    <!-- Scoring will be populated by JavaScript -->
                </div>
            </div>
            
            <div class="modal-action-buttons">
                <button class="modal-button secondary" onclick="closeModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
                <button class="modal-button primary" onclick="selectTemplate()">–í—ã–±—Ä–∞—Ç—å —à–∞–±–ª–æ–Ω</button>
            </div>
        </div>
    </div>

    <script>
        let currentTemplate = null;
        
        // –î–∞–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω–æ–≤
        const templates = {
            kolkhoz: {
                name: '–ö–æ–ª—Ö–æ–∑',
                icon: 'üé±',
                settings: {
                    '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞—Ä–æ–≤': '15',
                    '–õ–∏–º–∏—Ç –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —Ö–æ–¥': '–ë–µ–∑ –ª–∏–º–∏—Ç–∞',
                    '–£—Å–ª–æ–≤–∏–µ –ø–æ–±–µ–¥—ã': '–î–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ',
                    '–ü–æ—Ä—è–¥–æ–∫ –∏–≥—Ä—ã': '–ü–æ –æ—á–µ—Ä–µ–¥–∏',
                    '–ü—Ä–∞–≤–∏–ª–æ –∫–∞—Å–∞–Ω–∏—è': '–õ—é–±–æ–π —à–∞—Ä',
                    '–ü–µ—Ä–µ–∏–≥—Ä–æ–≤–∫–∞': '–ü—Ä–∏ –Ω–∏—á—å–µ–π'
                },
                balls: [
                    { name: '–ë–µ–ª—ã–π', points: '–ë–∏—Ç–æ–∫', color: 'white' },
                    { name: '–ñ–µ–ª—Ç—ã–π', points: '2 –æ—á–∫–∞', color: 'yellow' },
                    { name: '–ó–µ–ª–µ–Ω—ã–π', points: '3 –æ—á–∫–∞', color: 'green' },
                    { name: '–ö–æ—Ä–∏—á–Ω–µ–≤—ã–π', points: '4 –æ—á–∫–∞', color: 'brown' },
                    { name: '–°–∏–Ω–∏–π', points: '5 –æ—á–∫–æ–≤', color: 'blue' },
                    { name: '–†–æ–∑–æ–≤—ã–π', points: '6 –æ—á–∫–æ–≤', color: 'pink' },
                    { name: '–ß–µ—Ä–Ω—ã–π', points: '7 –æ—á–∫–æ–≤', color: 'black' },
                    { name: '–ö—Ä–∞—Å–Ω—ã–µ', points: '1 –æ—á–∫–æ (15 —à—Ç.)', color: 'red' }
                ],
                scoring: {
                    '–°—Ç–æ–∏–º–æ—Å—Ç—å –æ–¥–Ω–æ–≥–æ –æ—á–∫–∞': '10‚ÇΩ',
                    '–®—Ç—Ä–∞—Ñ –∑–∞ —Ñ–æ–ª': '50‚ÇΩ',
                    '–ë–æ–Ω—É—Å –∑–∞ —Å–µ—Ä–∏—é': '20‚ÇΩ (5+ —à–∞—Ä–æ–≤)',
                    '–®—Ç—Ä–∞—Ñ –∑–∞ –ø—Ä–æ–º–∞—Ö': '10‚ÇΩ'
                }
            },
            americana: {
                name: '–ê–º–µ—Ä–∏–∫–∞–Ω–∫–∞',
                icon: 'üî¥',
                settings: {
                    '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞—Ä–æ–≤': '15',
                    '–õ–∏–º–∏—Ç –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —Ö–æ–¥': '5 –º–∏–Ω',
                    '–£—Å–ª–æ–≤–∏–µ –ø–æ–±–µ–¥—ã': '–ó–∞–±–∏—Ç—å 8-–∫—É',
                    '–ü–æ—Ä—è–¥–æ–∫ –∏–≥—Ä—ã': '–ü–æ –æ—á–µ—Ä–µ–¥–∏',
                    '–ì—Ä—É–ø–ø—ã —à–∞—Ä–æ–≤': '–°–ø–ª–æ—à–Ω—ã–µ/–ü–æ–ª–æ—Å–∞—Ç—ã–µ',
                    '–ü—Ä–∞–≤–∏–ª–æ –∫–∞—Å–∞–Ω–∏—è': '–¢–æ–ª—å–∫–æ —Å–≤–æ–∏ —à–∞—Ä—ã'
                },
                balls: [
                    { name: '–ë–µ–ª—ã–π', points: '–ë–∏—Ç–æ–∫', color: 'white' },
                    { name: '1', points: '–ñ–µ–ª—Ç—ã–π —Å–ø–ª–æ—à–Ω–æ–π', color: 'yellow' },
                    { name: '2', points: '–°–∏–Ω–∏–π —Å–ø–ª–æ—à–Ω–æ–π', color: 'blue' },
                    { name: '3', points: '–ö—Ä–∞—Å–Ω—ã–π —Å–ø–ª–æ—à–Ω–æ–π', color: 'red' },
                    { name: '9', points: '–ñ–µ–ª—Ç—ã–π –ø–æ–ª–æ—Å–∞—Ç—ã–π', color: 'yellow' },
                    { name: '10', points: '–°–∏–Ω–∏–π –ø–æ–ª–æ—Å–∞—Ç—ã–π', color: 'blue' },
                    { name: '11', points: '–ö—Ä–∞—Å–Ω—ã–π –ø–æ–ª–æ—Å–∞—Ç—ã–π', color: 'red' },
                    { name: '8', points: '–ß–µ—Ä–Ω—ã–π (—Ä–µ—à–∞—é—â–∏–π)', color: 'black' }
                ],
                scoring: {
                    '–°—Ç–æ–∏–º–æ—Å—Ç—å –æ–¥–Ω–æ–≥–æ –æ—á–∫–∞': '25‚ÇΩ',
                    '–®—Ç—Ä–∞—Ñ –∑–∞ —Ñ–æ–ª': '100‚ÇΩ',
                    '–ë–æ–Ω—É—Å –∑–∞ 8-–∫—É —Å —Ä–∞–∑–±–æ—è': '500‚ÇΩ',
                    '–®—Ç—Ä–∞—Ñ –∑–∞ –¥–æ—Å—Ä–æ—á–Ω—É—é 8-–∫—É': '200‚ÇΩ'
                }
            },
            pyramid: {
                name: '–ü–∏—Ä–∞–º–∏–¥–∞',
                icon: 'üî∫',
                settings: {
                    '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞—Ä–æ–≤': '15',
                    '–õ–∏–º–∏—Ç –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —Ö–æ–¥': '10 –º–∏–Ω',
                    '–£—Å–ª–æ–≤–∏–µ –ø–æ–±–µ–¥—ã': '–î–æ 71 –æ—á–∫–∞',
                    '–ü–æ—Ä—è–¥–æ–∫ –∏–≥—Ä—ã': '–ü–æ –æ—á–µ—Ä–µ–¥–∏',
                    '–õ—É–∑—ã': '–¢–æ–ª—å–∫–æ —É–≥–ª–æ–≤—ã–µ',
                    '–ü—Ä–∞–≤–∏–ª–æ –∫–∞—Å–∞–Ω–∏—è': '–°—Ç—Ä–æ–≥–æ–µ'
                },
                balls: [
                    { name: '–ë–µ–ª—ã–π', points: '–ë–∏—Ç–æ–∫', color: 'white' },
                    { name: '–ñ–µ–ª—Ç—ã–π', points: '2 –æ—á–∫–∞', color: 'yellow' },
                    { name: '–ó–µ–ª–µ–Ω—ã–π', points: '3 –æ—á–∫–∞', color: 'green' },
                    { name: '–ö–æ—Ä–∏—á–Ω–µ–≤—ã–π', points: '4 –æ—á–∫–∞', color: 'brown' },
                    { name: '–°–∏–Ω–∏–π', points: '5 –æ—á–∫–æ–≤', color: 'blue' },
                    { name: '–†–æ–∑–æ–≤—ã–π', points: '6 –æ—á–∫–æ–≤', color: 'pink' },
                    { name: '–ß–µ—Ä–Ω—ã–π', points: '7 –æ—á–∫–æ–≤', color: 'black' },
                    { name: '–ö—Ä–∞—Å–Ω—ã–µ', points: '1 –æ—á–∫–æ (15 —à—Ç.)', color: 'red' }
                ],
                scoring: {
                    '–°—Ç–æ–∏–º–æ—Å—Ç—å –æ–¥–Ω–æ–≥–æ –æ—á–∫–∞': '50‚ÇΩ',
                    '–®—Ç—Ä–∞—Ñ –∑–∞ —Ñ–æ–ª': '200‚ÇΩ',
                    '–ë–æ–Ω—É—Å –∑–∞ —Å–µ—Ä–∏—é': '100‚ÇΩ (3+ —à–∞—Ä–∞)',
                    '–®—Ç—Ä–∞—Ñ –∑–∞ –Ω–µ—Ç–æ—á–Ω–æ–µ –∫–∞—Å–∞–Ω–∏–µ': '50‚ÇΩ'
                }
            }
        };
        
        function viewTemplate(templateType) {
            console.log('üëÅÔ∏è Viewing template:', templateType);
            currentTemplate = templateType;
            
            const template = templates[templateType];
            if (!template) return;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –º–æ–¥–∞–ª–∞
            document.getElementById('modalIcon').textContent = template.icon;
            document.getElementById('modalTitle').textContent = template.name;
            
            // –ó–∞–ø–æ–ª–Ω—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
            const settingsContainer = document.getElementById('modalSettings');
            settingsContainer.innerHTML = '';
            Object.entries(template.settings).forEach(([key, value]) => {
                const settingItem = document.createElement('div');
                settingItem.className = 'modal-setting-item';
                settingItem.innerHTML = `
                    <div class="modal-setting-title">${key}</div>
                    <div class="modal-setting-value">${value}</div>
                `;
                settingsContainer.appendChild(settingItem);
            });
            
            // –ó–∞–ø–æ–ª–Ω—è–µ–º —à–∞—Ä—ã
            const ballsContainer = document.getElementById('modalBallsGrid');
            ballsContainer.innerHTML = '';
            template.balls.forEach(ball => {
                const ballItem = document.createElement('div');
                ballItem.className = 'modal-ball-item';
                ballItem.innerHTML = `
                    <div class="modal-ball ${ball.color}"></div>
                    <div class="modal-ball-name">${ball.name}</div>
                    <div class="modal-ball-points">${ball.points}</div>
                `;
                ballsContainer.appendChild(ballItem);
            });
            
            // –ó–∞–ø–æ–ª–Ω—è–µ–º —Å–∏—Å—Ç–µ–º—É –æ—á–∫–æ–≤
            const scoringContainer = document.getElementById('modalScoringGrid');
            scoringContainer.innerHTML = '';
            Object.entries(template.scoring).forEach(([key, value]) => {
                const scoringItem = document.createElement('div');
                scoringItem.className = 'modal-scoring-item';
                scoringItem.innerHTML = `
                    <div class="modal-scoring-label">${key}</div>
                    <div class="modal-scoring-value">${value}</div>
                `;
                scoringContainer.appendChild(scoringItem);
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª
            document.getElementById('templateModal').classList.add('show');
        }
        
        function closeModal() {
            document.getElementById('templateModal').classList.remove('show');
        }
        
        function selectTemplate() {
            if (!currentTemplate) return;
            
            console.log('üéÆ Selected template:', currentTemplate);
            
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª
            closeModal();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            showNotification(`–í—ã–±—Ä–∞–Ω —à–∞–±–ª–æ–Ω: ${templates[currentTemplate].name}`);
            
            // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Å–æ–∑–¥–∞–Ω–∏—é –∏–≥—Ä—ã
            // –ù–∞–ø—Ä–∏–º–µ—Ä: window.location.href = `session-creation-preview.html?template=${currentTemplate}`;
        }
        
        function createCustomTemplate() {
            console.log('‚öôÔ∏è Creating custom template');
            
            // –û—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª —Å–æ–∑–¥–∞–Ω–∏—è —à–∞–±–ª–æ–Ω–∞
            document.getElementById('createTemplateModal').classList.add('show');
        }
        
        function closeCreateModal() {
            document.getElementById('createTemplateModal').classList.remove('show');
        }
        
        function saveCustomTemplate() {
            // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã
            const templateData = {
                name: document.getElementById('templateName').value || '–ú–æ–π —à–∞–±–ª–æ–Ω',
                description: document.getElementById('templateDescription').value || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —à–∞–±–ª–æ–Ω –∏–≥—Ä—ã',
                settings: getFormSettings(),
                balls: getBallsConfiguration(),
                scoring: getScoringConfiguration()
            };
            
            // –í–∞–ª–∏–¥–∞—Ü–∏—è
            if (!templateData.name.trim()) {
                showNotification('–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞!');
                return;
            }
            
            console.log('üíæ Saving custom template:', templateData);
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≤ –ª–æ–∫–∞–ª—å–Ω—É—é –∫–æ–ª–ª–µ–∫—Ü–∏—é —à–∞–±–ª–æ–Ω–æ–≤
            templates.custom = {
                name: templateData.name,
                icon: '‚öôÔ∏è',
                settings: templateData.settings,
                balls: templateData.balls,
                scoring: templateData.scoring
            };
            
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª
            closeCreateModal();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–º —Å–æ–∑–¥–∞–Ω–∏–∏
            showNotification(`–®–∞–±–ª–æ–Ω "${templateData.name}" —Å–æ–∑–¥–∞–Ω!`);
            
            // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É —à–∞–±–ª–æ–Ω–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
            addCustomTemplateCard(templateData);
        }
        
        function getFormSettings() {
            const settings = {};
            
            // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞—Ä–æ–≤
            const ballCount = document.querySelector('#ballCountOptions .form-option.selected')?.dataset.value || '15';
            settings['–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞—Ä–æ–≤'] = ballCount;
            
            // –õ–∏–º–∏—Ç –≤—Ä–µ–º–µ–Ω–∏
            const timeLimit = document.querySelector('#timeLimitOptions .form-option.selected')?.dataset.value || 'none';
            settings['–õ–∏–º–∏—Ç –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —Ö–æ–¥'] = timeLimit === 'none' ? '–ë–µ–∑ –ª–∏–º–∏—Ç–∞' : `${timeLimit} –º–∏–Ω`;
            
            // –£—Å–ª–æ–≤–∏–µ –ø–æ–±–µ–¥—ã
            const winCondition = document.querySelector('#winConditionOptions .form-option.selected')?.dataset.value || 'last';
            switch(winCondition) {
                case 'last': settings['–£—Å–ª–æ–≤–∏–µ –ø–æ–±–µ–¥—ã'] = '–î–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ'; break;
                case '50': settings['–£—Å–ª–æ–≤–∏–µ –ø–æ–±–µ–¥—ã'] = '–î–æ 50 –æ—á–∫–æ–≤'; break;
                case '100': settings['–£—Å–ª–æ–≤–∏–µ –ø–æ–±–µ–¥—ã'] = '–î–æ 100 –æ—á–∫–æ–≤'; break;
                case 'custom': settings['–£—Å–ª–æ–≤–∏–µ –ø–æ–±–µ–¥—ã'] = '–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–µ'; break;
            }
            
            // –ü–æ—Ä—è–¥–æ–∫ –∏–≥—Ä—ã
            const turnOrder = document.querySelector('#turnOrderOptions .form-option.selected')?.dataset.value || 'sequential';
            settings['–ü–æ—Ä—è–¥–æ–∫ –∏–≥—Ä—ã'] = turnOrder === 'sequential' ? '–ü–æ –æ—á–µ—Ä–µ–¥–∏' : '–°–ª—É—á–∞–π–Ω—ã–π';
            
            return settings;
        }
        
        function getBallsConfiguration() {
            const balls = [];
            const ballItems = document.querySelectorAll('#ballsConfig .ball-config-item.selected');
            
            ballItems.forEach(item => {
                const ballColor = item.dataset.ball;
                const ballName = item.querySelector('.config-ball-name').textContent;
                const ballPoints = item.querySelector('.config-ball-input').value || '0';
                
                balls.push({
                    name: ballName,
                    points: ballPoints,
                    color: ballColor
                });
            });
            
            return balls;
        }
        
        function getScoringConfiguration() {
            const scoring = {};
            
            // –°—Ç–æ–∏–º–æ—Å—Ç—å –æ—á–∫–∞
            const pointPriceSelected = document.querySelector('#pointPriceOptions .price-option.selected');
            const customPointPrice = document.getElementById('customPointPrice').value;
            const pointPrice = customPointPrice || pointPriceSelected?.dataset.value || '10';
            scoring['–°—Ç–æ–∏–º–æ—Å—Ç—å –æ–¥–Ω–æ–≥–æ –æ—á–∫–∞'] = `${pointPrice}‚ÇΩ`;
            
            // –®—Ç—Ä–∞—Ñ –∑–∞ —Ñ–æ–ª
            const foulPenaltySelected = document.querySelector('#foulPenaltyOptions .price-option.selected');
            const customFoulPenalty = document.getElementById('customFoulPenalty').value;
            const foulPenalty = customFoulPenalty || foulPenaltySelected?.dataset.value || '50';
            scoring['–®—Ç—Ä–∞—Ñ –∑–∞ —Ñ–æ–ª'] = `${foulPenalty}‚ÇΩ`;
            
            return scoring;
        }
        
        function addCustomTemplateCard(templateData) {
            const templatesGrid = document.querySelector('.templates-grid');
            const createCard = templatesGrid.querySelector('.create-custom');
            
            // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é –∫–∞—Ä—Ç–æ—á–∫—É —à–∞–±–ª–æ–Ω–∞
            const newCard = document.createElement('div');
            newCard.className = 'template-card';
            newCard.onclick = () => viewTemplate('custom');
            
            newCard.innerHTML = `
                <div class="template-icon">‚öôÔ∏è</div>
                <h3 class="template-title">${templateData.name}</h3>
                <p class="template-description">${templateData.description}</p>
                
                <div class="template-settings">
                    <div class="setting-row">
                        <span class="setting-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞—Ä–æ–≤:</span>
                        <span class="setting-value">${templateData.settings['–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞—Ä–æ–≤']} —à–∞—Ä–æ–≤</span>
                    </div>
                    <div class="setting-row">
                        <span class="setting-label">–£—Å–ª–æ–≤–∏–µ –ø–æ–±–µ–¥—ã:</span>
                        <span class="setting-value">${templateData.settings['–£—Å–ª–æ–≤–∏–µ –ø–æ–±–µ–¥—ã']}</span>
                    </div>
                    <div class="setting-row">
                        <span class="setting-label">–°—Ç–æ–∏–º–æ—Å—Ç—å –æ—á–∫–∞:</span>
                        <span class="setting-value">${templateData.scoring['–°—Ç–æ–∏–º–æ—Å—Ç—å –æ–¥–Ω–æ–≥–æ –æ—á–∫–∞']}</span>
                    </div>
                    <div class="setting-row">
                        <span class="setting-label">–®—Ç—Ä–∞—Ñ –∑–∞ —Ñ–æ–ª:</span>
                        <span class="setting-value">${templateData.scoring['–®—Ç—Ä–∞—Ñ –∑–∞ —Ñ–æ–ª']}</span>
                    </div>
                </div>
                
                <button class="template-button" onclick="event.stopPropagation(); viewTemplate('custom')">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —à–∞–±–ª–æ–Ω</button>
            `;
            
            // –í—Å—Ç–∞–≤–ª—è–µ–º –ø–µ—Ä–µ–¥ –∫–∞—Ä—Ç–æ—á–∫–æ–π "–°–æ–∑–¥–∞—Ç—å —Å–≤–æ–π"
            templatesGrid.insertBefore(newCard, createCard);
        }
        
        function showNotification(message) {
            // –°–æ–∑–¥–∞–µ–º –ø—Ä–æ—Å—Ç–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, var(--color-mint), var(--color-primary));
                color: var(--color-black);
                padding: 16px 24px;
                border-radius: 12px;
                box-shadow: var(--shadow-lg);
                z-index: 1001;
                font-weight: 600;
                animation: slideIn 0.3s ease-out;
                max-width: 300px;
            `;
            notification.textContent = message;
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideIn {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
                @keyframes slideOut {
                    from { transform: translateX(0); opacity: 1; }
                    to { transform: translateX(100%); opacity: 0; }
                }
            `;
            document.head.appendChild(style);
            
            document.body.appendChild(notification);
            
            // –£–±–∏—Ä–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease-in';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }
        
        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–∞ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –µ–≥–æ
        document.getElementById('templateModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });
        
        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–∞ –ø–æ –Ω–∞–∂–∞—Ç–∏—é Escape
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal();
                closeCreateModal();
            }
        });
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –¥–ª—è —Ñ–æ—Ä–º—ã —Å–æ–∑–¥–∞–Ω–∏—è —à–∞–±–ª–æ–Ω–∞
        document.addEventListener('DOMContentLoaded', function() {
            initializeFormHandlers();
        });
        
        function initializeFormHandlers() {
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –æ–ø—Ü–∏–π —Ñ–æ—Ä–º—ã
            document.querySelectorAll('.form-option').forEach(option => {
                option.addEventListener('click', function() {
                    // –£–±–∏—Ä–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å –¥—Ä—É–≥–∏—Ö –æ–ø—Ü–∏–π –≤ —Ç–æ–π –∂–µ –≥—Ä—É–ø–ø–µ
                    const group = this.parentElement;
                    group.querySelectorAll('.form-option').forEach(opt => opt.classList.remove('selected'));
                    // –í—ã–¥–µ–ª—è–µ–º —Ç–µ–∫—É—â—É—é –æ–ø—Ü–∏—é
                    this.classList.add('selected');
                });
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Ü–µ–Ω–æ–≤—ã—Ö –æ–ø—Ü–∏–π
            document.querySelectorAll('.price-option').forEach(option => {
                option.addEventListener('click', function() {
                    // –£–±–∏—Ä–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å –¥—Ä—É–≥–∏—Ö –æ–ø—Ü–∏–π –≤ —Ç–æ–π –∂–µ –≥—Ä—É–ø–ø–µ
                    const group = this.parentElement;
                    group.querySelectorAll('.price-option').forEach(opt => opt.classList.remove('selected'));
                    // –í—ã–¥–µ–ª—è–µ–º —Ç–µ–∫—É—â—É—é –æ–ø—Ü–∏—é
                    this.classList.add('selected');
                    // –û—á–∏—â–∞–µ–º –∫–∞—Å—Ç–æ–º–Ω—ã–π –∏–Ω–ø—É—Ç –≤ —Ç–æ–π –∂–µ –≥—Ä—É–ø–ø–µ
                    const customInput = group.querySelector('.price-input');
                    if (customInput) customInput.value = '';
                });
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Ü–µ–Ω–æ–≤—ã—Ö –∏–Ω–ø—É—Ç–æ–≤
            document.querySelectorAll('.price-input').forEach(input => {
                input.addEventListener('focus', function() {
                    // –£–±–∏—Ä–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –æ–ø—Ü–∏–π
                    const group = this.parentElement;
                    group.querySelectorAll('.price-option').forEach(opt => opt.classList.remove('selected'));
                });
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —à–∞—Ä–æ–≤
            document.querySelectorAll('.ball-config-item').forEach(item => {
                item.addEventListener('click', function(e) {
                    // –ù–µ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º –µ—Å–ª–∏ –∫–ª–∏–∫–Ω—É–ª–∏ –Ω–∞ –∏–Ω–ø—É—Ç
                    if (e.target.classList.contains('config-ball-input')) return;
                    
                    // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º –≤—ã–±–æ—Ä —à–∞—Ä–∞
                    this.classList.toggle('selected');
                });
            });
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–∞ —Å–æ–∑–¥–∞–Ω–∏—è —à–∞–±–ª–æ–Ω–∞ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –µ–≥–æ
            document.getElementById('createTemplateModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeCreateModal();
                }
            });
        }
    </script>
</body>
</html>
